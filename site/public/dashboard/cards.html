<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link
  rel="shortcut icon"
  href="../assets/icon/favicon2.ico"
  type="image/x-icon"
/>
  
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Groove Odyssey | Quiz</title>

  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="dashboards.css" />
  <link rel="stylesheet" href="../css/indexTeste.css">

  <script src="../js/funcoes.js"></script>
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet" />
</head>
<!-- <body onload="validarSessao(), atualizacaoPeriodica()"> -->

<body>
  <div class="janela">
    <div class="header-left">
      <img src="../assets/imagensTeste/logo_pi.png" alt="" id="imgLogo">



      
        <h3>Quiz</h3>
    

      
        <a href="./dashboard.html">
          <h3>Gráficos</h3>
        </a>
      

      
        <a href="./mural.html">
          <h3>Comentários</h3>
        </a>
  

      
        <img src="../assets/imagensTeste/logout.png" alt="" onclick="limparSessao()" id="imgLogout">
  
    </div>
    <div class="dash" id="divQuiz" style="color: white;">
        <div class="caixa" id="caixaQuiz">
          <h1 style="font-size: 3.5rem;">Bem vindo ao nosso <span>Quiz Musical</span></h1>
          <h2 style="font-size: 2rem;">Teste seus conhecimentos gerais sobre música!</h2>
          <button onclick="iniciar()">Iniciar Quiz!</button>
              </div>

    </div>
</body>

</html>

<script>
function iniciar(){
    var caixa = document.getElementById("caixaQuiz");
    caixa.innerHTML = `      <h1 id="h1questao">Questões <span id="questao_atual">1</span>/10</h1>
      <div class="pergunta">
        <h2 id="pergunta">Qual banda lançou o álbum Dark Side of the Moon?</h2>
      </div>
      <div class="respostas">
        <div class="resposta" onclick="responder(1)">
          <h3 id="resposta_1">Led Zeppelin</h3>
        </div>
        <div class="resposta" onclick="responder(2)">
          <h3 id="resposta_2">Pink Floyd</h3>
        </div>
        <div class="resposta" onclick="responder(3)">
          <h3 id="resposta_3">The Rolling Stones</h3>
        </div>
        <div class="resposta" onclick="responder(4)">
          <h3 id="resposta_4">The Beatles</h3>
        </div>
      </div>`;
  }

  var pergunta1 = {
    pergunta: "Qual banda lançou o álbum Dark Side of the Moon?",
    resposta1: "Led Zeppelin",
    resposta2: "Pink Floyd",
    resposta3: "The Rolling Stones",
    resposta4: "The Beatles",
    resposta_certa: 2,
  };

  var pergunta2 = {
    pergunta: "Qual instrumento musical é conhecido como rei dos instrumentos?",
    resposta1: "Piano",
    resposta2: "Guitarra",
    resposta3: "Violino",
    resposta4: "Bateria",
    resposta_certa: 1,
  };

  var pergunta3 = {
    pergunta: "Qual é o nome do vocalista da banda U2?",
    resposta1: "Bono",
    resposta2: "Sting",
    resposta3: "Freddie Mercury",
    resposta4: "Chris Martin",
    resposta_certa: 1,
  };

  var pergunta4 = {
    pergunta: "Quem é conhecido como Rei do Pop?",
    resposta1: "Justin Bieber",
    resposta2: " Elvis Presley",
    resposta3: "Michael Jackson",
    resposta4: "Justin Timberlake",
    resposta_certa: 3,
  };

  var pergunta5 = {
    pergunta: "Qual o nome da cantora que lançou o álbum `21`?",
    resposta1: "Taylor Swift",
    resposta2: "Adele",
    resposta3: "Beyoncé",
    resposta4: "Rihanna",
    resposta_certa: 2,
  };

  var pergunta6 = {
    pergunta: "Qual o nome do primeiro álbum do Daft Punk?",
    resposta1: "Homework",
    resposta2: "Discovery",
    resposta3: "Random Access Memories",
    resposta4: "Human After All",
    resposta_certa: 1,
  };

  var pergunta7 = {
    pergunta: "Qual a música mais vendida de todos os tempos?",
    resposta1: "Smells Like Teen Spirit - Nirvana",
    resposta2: "Hey Jude - The Beatles",
    resposta3: "Imagine - John Lennon",
    resposta4: "Bohemian Rhapsody - Queen",
    resposta_certa: 4,
  };

  var pergunta8 = {
    pergunta: "Qual é o nome do guitarrista conhecido por sua técnica de tapping e pelo álbum Surfing with the Alien?",
    resposta1: "Eddie Van Halen",
    resposta2: "Jimi Hendrix",
    resposta3: "Joe Satriani",
    resposta4: "Jimmy Page",
    resposta_certa: 3,
  };

  var pergunta9 = {
    pergunta: "Qual é o gênero musical originário dos Estados Unidos que mistura elementos de jazz, blues e música clássica?",
    resposta1: "Rock and Roll",
    resposta2: "Raggae",
    resposta3: "R&B",
    resposta4: "Jazz",
    resposta_certa: 4,
  };

  var pergunta10 = {
    pergunta: "Quem são os artistas que lançaram a música Tadow?",
    resposta1: "Masego e FKJ",
    resposta2: "Masego e H.E.R",
    resposta3: "Masego e Ari Lennox",
    resposta4: "Masego e SZA",
    resposta_certa: 1,
  };

  var pontos = 0;
  var questao_atual = 2;
  var respostasCertas = [2, 1, 1, 3, 2, 1, 4, 3, 4, 1]

  function responder(resposta) {
    document.getElementById("questao_atual").innerHTML = questao_atual;
    var pergunta = document.getElementById("pergunta");
    var resposta1 = document.getElementById("resposta_1");
    var resposta2 = document.getElementById("resposta_2");
    var resposta3 = document.getElementById("resposta_3");
    var resposta4 = document.getElementById("resposta_4");
    var h1questao = document.getElementById("h1questao");

    if (questao_atual == 1) {
      pergunta.innerHTML = pergunta1.pergunta;
      resposta1.innerHTML = pergunta1.resposta1;
      resposta2.innerHTML = pergunta1.resposta2;  
      resposta3.innerHTML = pergunta1.resposta3;
      resposta4.innerHTML = pergunta1.resposta4;
    } else if (questao_atual == 2) {
      pergunta.innerHTML = pergunta2.pergunta;
      resposta1.innerHTML = pergunta2.resposta1;
      resposta2.innerHTML = pergunta2.resposta2;
      resposta3.innerHTML = pergunta2.resposta3;
      resposta4.innerHTML = pergunta2.resposta4;
    } else if (questao_atual == 3) {
      pergunta.innerHTML = pergunta3.pergunta;
      resposta1.innerHTML = pergunta3.resposta1;
      resposta2.innerHTML = pergunta3.resposta2;
      resposta3.innerHTML = pergunta3.resposta3;
      resposta4.innerHTML = pergunta3.resposta4;
    } else if (questao_atual == 4) {
      pergunta.innerHTML = pergunta4.pergunta;
      resposta1.innerHTML = pergunta4.resposta1;
      resposta2.innerHTML = pergunta4.resposta2;
      resposta3.innerHTML = pergunta4.resposta3;
      resposta4.innerHTML = pergunta4.resposta4;
    } else if (questao_atual == 5) {
      pergunta.innerHTML = pergunta5.pergunta;
      resposta1.innerHTML = pergunta5.resposta1;
      resposta2.innerHTML = pergunta5.resposta2;
      resposta3.innerHTML = pergunta5.resposta3;
      resposta4.innerHTML = pergunta5.resposta4;
    } else if (questao_atual == 6) {
      pergunta.innerHTML = pergunta6.pergunta;
        resposta1.innerHTML = pergunta6.resposta1;
        resposta2.innerHTML = pergunta6.resposta2;
        resposta3.innerHTML = pergunta6.resposta3;
        resposta4.innerHTML = pergunta6.resposta4;
      } else if (questao_atual == 7) {
        pergunta.innerHTML = pergunta7.pergunta;
        resposta1.innerHTML = pergunta7.resposta1;
        resposta2.innerHTML = pergunta7.resposta2;
        resposta3.innerHTML = pergunta7.resposta3;
        resposta4.innerHTML = pergunta7.resposta4;
    } else if (questao_atual == 8) {
      pergunta.innerHTML = pergunta8.pergunta;
      resposta1.innerHTML = pergunta8.resposta1;
      resposta2.innerHTML = pergunta8.resposta2;
      resposta3.innerHTML = pergunta8.resposta3;
      resposta;
    } else if (questao_atual == 9) {
      pergunta.innerHTML = pergunta9.pergunta;
      resposta1.innerHTML = pergunta9.resposta1;
      resposta2.innerHTML = pergunta9.resposta2;
      resposta3.innerHTML = pergunta9.resposta3;
      resposta4.innerHTML = pergunta9.resposta4;
    } else if (questao_atual == 10) {
      pergunta.innerHTML = pergunta10.pergunta;
      resposta1.innerHTML = pergunta10.resposta1;
      resposta2.innerHTML = pergunta10.resposta2;
      resposta3.innerHTML = pergunta10.resposta3;
      resposta4.innerHTML = pergunta10.resposta4;
    } 

    if (resposta == respostasCertas[questao_atual - 2]) {
      pontos++;
    }

    if (questao_atual == 11) {
      pergunta.innerHTML = `<h1 style="font-size: 3rem;">Muito bem! Sua pontuação final foi <span id="questao_atual" class="laranjinha">${pontos}</span>/10</h1>`;
      h1questao.innerHTML = `Você chegou ao fim do quiz!`
    
      
      var respostasDivs = document.getElementsByClassName("resposta");
    for (var i = 0; i < respostasDivs.length; i++) {
      respostasDivs[i].style.display = "none";
    }
    cadastrarQuiz(pontos);
      return;
    }

    questao_atual++;
  }


  function cadastrarQuiz(pontos) {
    var idUsuario = sessionStorage.ID_USUARIO;
    var cadastroPontos = pontos;
    // Enviando o valor da nova input
    fetch("/usuarios/cadastrarQuiz", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/usuario.js
        pontosServer: cadastroPontos,
        idUsuarioServer: idUsuario,
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {
          setTimeout(() => {
            window.location = "dashboard.html";
          }, "2000");

        } else {
          throw "Houve um erro ao tentar realizar o cadastro!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        finalizarAguardar();
      });

    return false;
  }

  function sumirMensagem() {
    cardErro.style.display = "none";
  }
</script>